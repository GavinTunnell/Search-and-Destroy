ekf_filter_node:
  ros__parameters:
    frequency: 50.0
    sensor_timeout: 1.0
    two_d_mode: true

    publish_tf: true
    map_frame: map
    odom_frame: odom
    base_link_frame: base_link
    world_frame: odom

    # IMU input only (orientation + angular velocity)
    imu0: /imu/data
    imu0_config: [
      false, false, false,   # x y z
      true,  true,  true,    # roll pitch yaw
      false, false, false,   # vx vy vz
      true,  true,  true,    # vroll vpitch vyaw
      false, false, false    # ax ay az
    ]
    imu0_nodelay: false
    imu0_differential: true
    imu0_relative: false
    imu0_queue_size: 10
    imu0_remove_gravitational_acceleration: true

    # Process/measurement noise (light defaults; tune as needed)
    process_noise_covariance: [
      1.0e-2, 0.0,    0.0,    0.0,    0.0,    0.0,
      0.0,    1.0e-2, 0.0,    0.0,    0.0,    0.0,
      0.0,    0.0,    1.0e-2, 0.0,    0.0,    0.0,
      0.0,    0.0,    0.0,    1.0e-3, 0.0,    0.0,
      0.0,    0.0,    0.0,    0.0,    1.0e-3, 0.0,
      0.0,    0.0,    0.0,    0.0,    0.0,    1.0e-2
    ]

    # Let EKF use the IMU message covariances for measurements (orientation/gyro)

    imu0_orientation_rejection_threshold: 0.8
    imu0_angular_velocity_rejection_threshold: 0.8
